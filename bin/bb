#!/usr/bin/env ruby
require 'fileutils'
require 'pathname'

gem_data = Pathname(__FILE__) + '../../data'

book_dir = Pathname.pwd
format_dirs = [ book_dir / 'format', book_dir / '.format', gem_data / 'formats' ]

rakefile = format_dirs.map { |d| d / 'Rakefile' }.find { |r| r.file? }
abort "Could not find compiler (Rakefile) in #{builder_dirs.join(' ')}" unless rakefile

system 'rake', '-f', rakefile.to_s, *ARGV
